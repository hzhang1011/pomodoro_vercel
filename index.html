<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pomodoro Timer</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap" rel="stylesheet" />
<style>
:root {
  --bg: #fefefe;
  --text: #222;
  --focus: #ff5252;
  --short: #00bcd4;
  --long: #4caf50;
  --btn-bg: rgba(50, 50, 50, 0.5);
  --btn-text: #fff;
}
[data-theme="dark"] {
  --bg: #1a1a1a;
  --text: #f0f0f0;
  --btn-bg: rgba(255, 255, 255, 0.15);
}
body {
  font-family: 'Poppins', sans-serif;
  background: var(--bg);
  color: var(--text);
  margin: 0;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px 10px;
  transition: background 0.3s, color 0.3s;
}
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  max-width: 380px;
}
.card {
  backdrop-filter: blur(15px) saturate(180%);
  background: rgba(255, 255, 255, 0.2);
  border-radius: 25px;
  padding: 20px;
  margin: 10px 0;
  width: 100%;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-evenly;
}
.section {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  margin: 8px 0;
}
.title {
  flex-direction: column;
  text-align: center;
}
.title h1 {
  font-size: 32px;
  font-weight: 700;
  margin: 0;
}
.title .cycles {
  font-size: 14px;
  margin-top: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}
.mode-buttons,
.buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
}
.mode-buttons button,
.buttons button {
  flex: 1 1 45%;
  min-width: 100px;
  max-width: 120px;
  padding: 10px 0;
  border-radius: 15px;
  border: none;
  font-size: 15px;
  cursor: pointer;
  background: var(--btn-bg);
  color: var(--btn-text);
  transition: transform 0.1s, background 0.2s;
  text-align: center;
}
.mode-buttons button.active {
  background: var(--focus);
}
.mode-buttons button:active,
.buttons button:active {
  transform: scale(0.95);
}
.time {
  font-size: 64px;
  font-weight: bold;
  text-align: center;
}
.footer {
  text-align: center;
  padding: 12px 0;
  font-size: 14px;
  opacity: 0.7;
}
#enableSoundOverlay {
  position: fixed;
  inset: 0;
  background: #000c;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  z-index: 9999;
  cursor: pointer;
}
@media (max-width: 420px) {
  .title h1 { font-size: 28px; }
  .time { font-size: 56px; }
  .mode-buttons button, .buttons button {
    font-size: 14px;
    min-width: 90px;
    padding: 9px 0;
  }
}
</style>
</head>
<body>
<div id="enableSoundOverlay">ðŸ”Š Tap to enable sound</div>

<div class="container">
  <div class="card main">
    <div class="section title">
      <h1>Pomodoro</h1>
      <div class="cycles">
        <button id="resetStats" style="padding:4px 8px;font-size:13px;">Reset</button>
        <span>Cycles: <span id="cycles">0</span></span>
      </div>
    </div>
    <div class="section mode-buttons">
      <button data-mode="focus" class="active">Focus</button>
      <button data-mode="short">Short</button>
      <button data-mode="long">Long</button>
    </div>
    <div class="section time" id="time">25:00</div>
    <div class="section buttons">
      <button id="start">Start</button>
      <button id="pause" style="display:none;">Pause</button>
      <button id="reset">Reset</button>
      <button id="toggleTheme">Theme</button>
    </div>
  </div>
</div>

<footer class="footer">W. I. T. H. STUDIO All rights reserved.</footer>

<audio id="alarmFocus" src="https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3"></audio>
<audio id="alarmShort" src="https://assets.mixkit.co/sfx/preview/mixkit-bell-notification-933.mp3"></audio>
<audio id="alarmLong" src="https://assets.mixkit.co/sfx/preview/mixkit-retro-game-notification-212.mp3"></audio>

<script>
const timeDisplay=document.getElementById('time');
const startBtn=document.getElementById('start');
const pauseBtn=document.getElementById('pause');
const resetBtn=document.getElementById('reset');
const toggleThemeBtn=document.getElementById('toggleTheme');
const modeButtons=document.querySelectorAll('.mode-buttons button');
const cycleSpan=document.getElementById('cycles');
const resetStatsBtn=document.getElementById('resetStats');
const overlay=document.getElementById('enableSoundOverlay');

const alarmFocus=document.getElementById('alarmFocus');
const alarmShort=document.getElementById('alarmShort');
const alarmLong=document.getElementById('alarmLong');

let currentMode='focus',timeLeft=25*60,timer=null,running=false,focusCount=0;
let modes={focus:25,short:5,long:15};
let cycleCount=parseInt(localStorage.getItem('cycleCount'))||0;
cycleSpan.textContent=cycleCount;

overlay.addEventListener('click',()=>{
  [alarmFocus,alarmShort,alarmLong].forEach(a=>{a.play().catch(()=>{});a.pause();a.currentTime=0;});
  overlay.style.display='none';
});
if('Notification'in window)Notification.requestPermission();

function updateDisplay(){
  const m=Math.floor(timeLeft/60),s=timeLeft%60;
  timeDisplay.textContent=`${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}
function playSound(sound){sound.pause();sound.currentTime=0;sound.play().catch(()=>{});}
function notify(txt){if(Notification.permission==='granted'){new Notification(txt);}else alert(txt);}
function startTimer(){
  if(running)return;
  running=true;startBtn.style.display='none';pauseBtn.style.display='inline-block';
  timer=setInterval(()=>{
    timeLeft--;updateDisplay();
    if(timeLeft<=0){clearInterval(timer);finishTimer();}
  },1000);
}
function pauseTimer(){running=false;clearInterval(timer);startBtn.style.display='inline-block';pauseBtn.style.display='none';}
function resetTimer(){
  clearInterval(timer);running=false;
  startBtn.style.display='inline-block';pauseBtn.style.display='none';
  timeLeft=modes[currentMode]*60;updateDisplay();
  [alarmFocus,alarmShort,alarmLong].forEach(a=>{a.pause();a.currentTime=0;});
}
modeButtons.forEach(b=>{
  b.addEventListener('click',()=>{
    currentMode=b.dataset.mode;
    timeLeft=modes[currentMode]*60;
    modeButtons.forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    updateDisplay();resetTimer();
  });
});
startBtn.addEventListener('click',startTimer);
pauseBtn.addEventListener('click',pauseTimer);
resetBtn.addEventListener('click',resetTimer);
toggleThemeBtn.addEventListener('click',()=>{
  if(document.documentElement.getAttribute('data-theme')==='dark')
    document.documentElement.removeAttribute('data-theme');
  else document.documentElement.setAttribute('data-theme','dark');
});
resetStatsBtn.addEventListener('click',()=>{
  cycleCount=0;
  localStorage.setItem('cycleCount',0);
  cycleSpan.textContent=cycleCount;
});
function finishTimer(){
  running=false;startBtn.style.display='inline-block';pauseBtn.style.display='none';
  if(currentMode==='focus'){
    playSound(alarmFocus);notify('Focus session complete!');
    focusCount++;if(focusCount>=4){focusCount=0;currentMode='long';}
    else{currentMode='short';}
    timeLeft=modes[currentMode]*60;
    modeButtons.forEach(x=>x.classList.remove('active'));
    document.querySelector(`[data-mode="${currentMode}"]`).classList.add('active');
    updateDisplay();
  }else{
    playSound(currentMode==='short'?alarmShort:alarmLong);
    notify(`${currentMode==='short'?'Short':'Long'} break over`);
    if(currentMode==='short'||currentMode==='long'){
      cycleCount++;
      localStorage.setItem('cycleCount',cycleCount);
      cycleSpan.textContent=cycleCount;
    }
  }
}
updateDisplay();
</script>
</body>
</html>